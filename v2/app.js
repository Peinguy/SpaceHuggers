/*
    Javascript Space Game
    By Frank Force 2021

*/

'use strict';

const clampCamera = !debug;
const lowGraphicsSettings = glOverlay = !window['chrome']; // only chromium uses high settings
const startCameraScale = 4*16;
const defaultCameraScale = 4*16;
const maxPlayers = 4;

const team_none = 0;
const team_player = 1;
const team_enemy = 2;

let updateWindowSize, renderWindowSize, gameplayWindowSize;

async function PS(){
	let PressStart = new FontFace("Press Start", "url(data:application/font-sfnt;base64,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/gAEAP0A/wABAAEABwD/AP8A/wD/AP8A/wD/AAEAAQABAAEAAQABAAEAAAMBAAAABwAHAAADAAcAHwAAAREhEQEhESEBESERIREhESERIREhESERIREhESERIREDAP4ABAACAP4AAgD/AP8A/wD/AP8A/wABAAEAAQABAAEABwD+AAIA+wD+AAcA/gD/AP8A/wD/AP8AAgABAAEAAQABAAEAAAQAAAAABwAHAAAFAAkADQApAAABESERIRkCIRkCIREBIREhESERIREhESERIREhESERIREhESERIREhAgACAP8AAQABAPsAAQABAP8AAQADAAEA/wACAP8AAQD+AP8A/QD/AAMA/gABAAEAAwD/AAEA/gD/AAEA/wABAAEAAQABAP8A/wD/AP8A/gD/AAEA/wABAAABAwAEAAUABwAAAwAAAREhEQUA/gAHAP0AAwAAAQIAAAAGAAcAABMAAAERIREhESERIREhESERIREhESERBgD/AP8AAQABAP4A/wD/AAEAAQAHAP8A/wD9AP8A/wABAAEAAwABAAEAAAECAAAABgAHAAATAAABESERIREhESERIREhESERIREhEQQAAQABAP8A/wD+AAEAAQD/AP8ABwD/AP8A/QD/AP8AAQABAAMAAQABAAABAAABAAcABgAAGwAAESERIREhESERIREhESERIREhESERIREhESERIQIA/wACAAEAAgD/AAIA/gABAP4A/wD+AAEA/gAEAAEAAQD/AAEA/wD/AP8A/wD/AAEA/wABAAEAAAEBAAEABwAGAAALAAABIREhESERIREhESEDAAIAAgD+AP4A/gACAAYA/gD/AP4AAgABAAABAgD/AAUAAgAABwAAASERIREhESEDAAIA/wD+AAEAAgD+AP8AAQAAAQEAAwAHAAQAAAMAAAEhESEBAAYA+gAEAP8AAAEDAAAABQACAAADAAABIREhAwACAP4AAgD+AAABAQAAAAcABwAAFwAAAREhESERIREhESERIREhESERIREhESERBwD/AP8A/wD/AP8A/wABAAEAAQABAAEABwD+AP8A/wD/AP8A/wACAAEAAQABAAEAAQAAAgAAAAAHAAcAAAcAGwAAAREhESERIREBIREhESERIREhESERIREhESERIQIAAQACAP8A/AABAAEAAwABAAEA/wD/AP0A/wD/AAYA/AD/AAQAAQD/AAEAAQD/AP8A/QD/AP8AAQABAAABAQAAAAcABwAACwAAAREhESERIREhESERBQACAPoAAgD/AAEABwD6AP8AAQAEAAEAAQAAAQAAAAAHAAcAABsAABEhESERIREhESERIREhEyERIREhESERIREhESEBAAEAAgABAP0A/gABAAgE+AEA/wD/AP4ABAD5AAIAAQABAAEAAQD/AAEAAQD/AP4A/wD/AP8A/wAAAAEAAAAABwAHAAAbAAARIREhESERIREhESERIREhESERIREhESERIREhAgADAP0AAQABAP0ABgD/AP8AAQABAP8A+wD/AAIA/wACAAEAAQABAAEA/wD/AP8A/wD+AP8AAQAAAgAAAAAHAAcAAAUAFQAAAREhESERKQERIREhESERIREhESERIQIAAgD/AP0AAQABAAEAAwABAP8A/gD8AAQA/wACAP8AAQABAAEA/AD/AP4AAgAAAQAAAAAHAAcAABMAABEhESERIREhESERIREhESERIREhAgADAPsABgD8AAQAAQD/APsA/wACAP8AAwADAP8A/wD/AP0A/wABAAACAAAAAAcABwAAAwAXAAABESERASERIREhESERIREhESERIREhESECAAMA+wABAAEABAD9AP8ABAABAP8A+wD/AAMA/gACAAIAAQABAP8A/wD/AP8A/gD/AAEAAAEAAAAABwAHAAATAAARIREhESERIREhESERIREhESERIQcA/wD/AP8A/gABAAEAAQD9AP4ABwD+AP8A/wD9AAMAAQABAAEA/wAAAwAAAAAHAAcAAAUACwAfAAABESERIREBESERIREBIREhESERIREhESERIREhESERIQEABAD+AP4AAQADAPsAAQD/AAEABAABAP8AAgD/APsA/wADAP4AAQABAAMA/wD/AAIA/QABAAIAAQD/AP4A/wD+AP8AAQAAAgAAAAAHAAcAAAMAFwAAAREhESkBESERIREhESERIREhESERIREhAgADAPsAAQAFAAEA/wD/APwAAwABAPwA/wAGAP4AAgABAP8A/AD/AP8AAQABAAEAAQAAAgMAAAAFAAUAAAMABwAAASERIREhESEDAAIA/gACAP4AAgD+AAUA/gAAAgIA/wAFAAUAAAcACwAAASERIREhESERIREhAwACAP8A/gABAAIA/gACAP4A/wABAAUA/gAAAQEAAAAGAAcAABsAAAERIREhESERIREhESERIREhESERIREhESERIREGAP8A/wD/AAEAAQABAP4A/wD/AP8AAQABAAEABwD/AP8A/wD/AP8A/wD/AAEAAQABAAEAAQABAAEAAAICAAIABgAFAAADAAcAAAEhESERIREhAgAEAPwABAD8AAMA/wADAP8AAAECAAAABwAHAAAbAAABESERIREhESERIREhESERIREhESERIREhESERBAABAAEAAQD/AP8A/wD+AAEAAQABAP8A/wD/AAcA/wD/AP8A/wD/AP8A/wABAAEAAQABAAEAAQABAAACAAAAAAcABwAAAwAXAAABIREhASERIREhESERIREhESERIREhESECAAMA/QD+AAEABQABAP8A/wD9AAEAAgD9AP4AAQD/AAYAAQD/AP4A/wD/AAEAAQACAP8AAAIAAAAABwAHAAADABcAAAERIREBIREhESERIREhESERIREhESERIQQAAgD6AAEABQABAP0A/wABAP4ABQD6AP8ABQD+AAIAAQABAP8A/AABAAIAAQD7AP8AAQAAAgAAAAAHAAcAAAcAFwAAAREhESERIREpAREhESERIREhESERIREhAgADAP8A/wD9AAEAAQADAAEAAQD+AP0A/gAFAP4AAgABAP8AAQABAP8A/wD7AAIA/gAAAwAAAAAHAAcAAAMABwATAAABESERAREhEQEhESERIREhESERIQIAAwD9AAMA+wAGAAEA/wABAP8A+gADAP4AAgADAP4AAgABAP8A/gD/AP4A/wAAAQAAAAAHAAcAABsAABEhESERIREhESERIREhESERIREhESERIREhESEBAAEABAABAP4A/gD/AAEAAgACAP8A/AD/AP8ABQABAAEA/wD/AAEA/wD9AP8AAQD/AP8AAQABAAACAAAAAAcABwAABwATAAABESERIREhEQEhESERIREhESERIQIAAgABAP8A/AAFAAEAAQD/AP8A+wAGAPsAAQADAAEAAQD/AP8A/QD/AP8AAAEAAAAABwAHAAALAAARIREhESERIREhESEHAPsABAD8AAUA+QAHAP8A/gD/AP4A/wAAAQAAAAAHAAcAAAkAABEhESERIREhESEHAPsABAD8AP4ABwD/AP4A/wD9AAABAAAAAAcABwAAFwAAESERIREhESERIREhESERIREhESERIREhAQABAAUA/AD/AAEAAgD/AAMA+wD/AP8ABQABAAEA/wD/AP0A/wACAAEA/AABAAEAAAEAAAAABwAHAAALAAARIREhESERIREhESECAAMAAgD+AP0A/gAHAP0AAwD5AAMA/QAAAQEAAAAHAAcAAAsAAAERIREhESERIREhEQcA/gACAPoAAgD+AAcA/wD7AP8AAQAFAAEAAAEAAAAABwAHAAALAAARIREhESERIREhESECAAMAAgD/APsA/wACAP8ABgD6AP8AAQAAAQAAAAAHAAcAAB0AABEhESERIREhESERIREhESERIREhESERIREhESERIQIAAQABAAEAAgD/AP8A/wABAAEAAQD9AP8A/wD+AAcA/QABAAEAAQD/AP8A/wD/AP8A/wD/AAEAAQD+AAABAAAAAAcABwAABQAAESERIREhAgAFAPkABwD6AP8AAAEAAAAABwAHAAATAAARIREhESERIREhESERIREhESERIQIAAQABAAEAAgD+AP8A/wD/AP4ABwD/AP8AAQABAPkAAwD/AAEA/QAAAQAAAAAHAAcAABMAABEhESERIREhESERIREhESERIREhAgABAAEAAQACAP4A/wD/AP8A/gAHAP8A/wD/AAMA+QABAAEAAQD9AAACAAAAAAcABwAAAwAPAAABESERKQERIREhESERIREhAgADAPsAAQAFAAEA/wD7AP8ABgD7AAUAAQD/APsA/wABAAACAAAAAAcABwAAAwANAAABESERASERIREhESERIQIAAwD7AAYAAQD/APwA/gAGAP0AAwABAP8A/QD/AP4AAAIAAAAABwAHAAAHABkAAAERIREhESERKQERIREhESERIREhESEDIREhAgACAP8AAgD7AAEABQABAP8AAQD/AP8ACPwI/wAGAPsAAQABAAMAAQD/APwA/wD/AAEA/wABAAAAAgAAAAAHAAcAAAUAFwAAAREhESERASERIREhESERIREhESERIREhAgACAAEA+wAGAAEA/gABAAEA/QD/AP8A/gAGAP0AAQACAAEA/wD9AP8A/wD/AAEAAQD+AAABAAAAAAcABwAAGwAAESERIREhESERIREhESERIREhESERIREhESERIQIAAwD8AP8AAQAEAAEA/gD+AAQAAQD/APsA/wACAP8AAgABAAIAAQD/AP8AAQD+AP8A/gD/AAEAAAEBAAAABwAHAAAHAAABESERIREhEQcA/gD+AP4ABwD/APoABgABAAABAAAAAAcABwAACwAAESERIREhESERIREhAgADAAIA/wD7AP8ABwD6AAYA+gD/AAEAAAEAAAAABwAHAAAXAAARIREhESERIREhESERIREhESERIREhESECAAEAAQABAAIA/wD/AP8A/wD/AP8A/wAHAPwA/wABAAQA/AD/AP8A/wABAAEAAQAAAQAAAAAHAAcAABcAABEhESERIREhESERIREhESERIREhESERIQIAAQABAAEAAgD/AP8A/wD/AP8A/wD/AAcA/QABAP8AAwD7AP4AAQABAP8A/wACAAABAAAAAAcABwAAIwAAESERIREhESERIREhESERIREhESERIREhESERIREhESERIREhAQABAP8A/wACAAEAAQABAAIA/wD/AAEAAQD+AP8A/wD/AP4AAgABAAEAAQACAP8A/wABAAEA/gD/AP8A/wD+AAEAAQD/AP8AAAEBAAAABwAHAAAPAAABESERIREhESERIREhESERAwACAAIA/wD/AP4A/wD/AAcA/QADAP0A/wD9AAMAAQADAAABAAAAAAcABwAAFwAAESERIREhESERIREhESERIREhESERIREhAQABAAEAAQD8AAcA/wD/AP8A/wAEAPkAAgABAAEAAQABAAEA/gD/AP8A/wD/AP8AAAECAAAABgAHAAAHAAABESERIREhEQYA/gACAPwABwD/APsA/wAHAAABAQAAAAcABwAAFwAAAREhESERIREhESERIREhESERIREhESERAgABAAEAAQABAAEA/wD/AP8A/wD/AP8ABwD/AP8A/wD/AP8A/gABAAEAAQABAAEAAgAAAQIAAAAGAAcAAAcAAAERIREhESERBgD8AAIA/gAHAPkAAQAFAAEAAAEAAAMABwAHAAAbAAARIREhESERIREhESERIREhESERIREhESERIREhAQABAAEAAQABAAEAAQD/AP8A/wD/AP8A/wD/AAQAAQABAAEA/wD/AP8A/wABAAEAAQD/AP8A/wAAAQAA/wAHAAAAAAMAADEhESEHAPkA/wAAAQEABQAEAAcAAAcAAAERIREhESERAwABAP4A/wAHAP8A/wABAAEAAAIAAAAABwAFAAADAAsAAAERIREpAREhESERIQIAAwD7AAEABgD6AP8ABAD9AAMAAQD7AAEAAAIAAAAABwAHAAADAA0AAAERIREBIREhESERIREhAgADAPsAAgAEAAEA/wD6AAQA/QADAAMA/gD/AP0A/wAAAQAAAAAHAAUAAA8AABEhESERIREhESERIREhESEBAAUAAQD+AP0ABQD6AP8ABAABAP8A/wABAP0A/wABAAACAAAAAAcABwAAAwANAAABESERKQERIREhESERIQIAAwD7AAEABAACAPoA/wAEAP0AAwABAAIA+QABAAACAAAAAAcABQAAAwARAAABESERKQERIREhESERIREhESECAAMA+wABAAUAAQD7AAQA+wD/AAQA/wABAAEA/wD+AP8A/wABAAABAQAAAAcABwAAEwAAAREhESERIREhESERIREhESERIREGAAEA/gD/AAIA/gD+AP8AAQABAAcA/wD/AAEA/gD/AP0AAwABAAIAAQAAAgAA/wAHAAUAAAMAEQAAAREhESkBESERIREhESERIREhAgADAPsAAQAGAP8A+wAEAPwA/wAEAP4AAgABAPsA/wABAAEAAQAAAQAAAAAHAAcAAAsAABEhESERIREhESERIQIABAABAP4A/QD+AAcA/gD/APwABAD8AAACAgAAAAYABwAAAwANAAABESERASERIREhESERIQUA/gD/AAMAAQD8AAEA/wAHAP8AAQD+APwA/wABAAMAAAIBAP8ABQAHAAAJAA0AAAEhESERIREhESEBESERAgADAP8A/QACAP8AAwD+AAUA+wD/AAEABAADAP8AAQAAAQAAAAAGAAcAABcAABEhESERIREhESERIREhESERIREhESERIQIAAQABAAIA/wD/AAEAAQD+AP8A/wD+AAcA/AABAAEA/wD/AP8A/wD/AAEAAQD+AAABAgAAAAYABwAACQAAAREhESERIREhEQUAAQD8AAEA/wAHAPoA/wABAAUAAQAAAQAAAAAHAAUAABEAABEhESERIREhESERIREhESERIQMAAQACAAEA/gD/AP8A/wD+AAUA/wABAP8A/AADAP8AAQD9AAABAAAAAAcABQAACQAAESERIREhESERIQYAAQD+AP0A/gAFAP8A/AAEAPwAAAIAAAAABwAFAAADAA8AAAERIREpAREhESERIREhESECAAMA+wABAAUAAQD/APsA/wAEAP0AAwABAP8A/QD/AAEAAAIAAP8ABwAFAAADAA0AAAERIREBIREhESERIREhAgADAPsABgABAP8A/AD+AAQA/QADAAEA/wD9AP8A/wAAAgAA/wAHAAUAAAMADQAAAREhESkBESERIREhESECAAMA+wABAAYA/gD8AP8ABAD9AAMAAQD6AAEAAQAAAQAAAAAHAAUAAAkAABEhESERIREhESEGAAEA/gD9AP4ABQD/AP8AAQD8AAABAAAAAAcABQAAEwAAESERIREhESERIREhESERIREhESEEAP0A/wABAAUA/QADAAEA/wD6AAEAAQABAAEAAQD/AP8A/wD/AP8AAAEAAAAABwAGAAATAAARIREhESERIREhESERIREhESERIQIAAgACAP4AAQACAP8A/QD/AP4ABQABAP8A/wD9AAEA/wD/AAEAAwAAAQAAAAAHAAUAAAkAABEhESERIREhESECAAMAAgD6AP8ABQD8AAQA+wABAAABAAAAAAcABQAAFwAAESERIREhESERIREhESERIREhESERIREhAgABAAEAAQACAP8A/wD/AP8A/wD/AP8ABQD+AP8AAQACAP4A/wD/AP8AAQABAAEAAAEAAAAABwAFAAATAAARIREhESERIREhESERIREhESERIQIAAQABAAEAAgD/AP4A/wD+AP8ABQD9AAEA/wADAPwA/wABAP8AAQAAAQAAAAAHAAUAACMAABEhESERIREhESERIREhESERIREhESERIREhESERIREhESERIQEAAQD/AP8AAgABAAEAAQACAP8A/wABAAEA/gD/AP8A/wD+AAEAAQABAAEAAQD/AP8AAQABAP8A/wD/AP8A/wABAAEA/wD/AAABAAD/AAcABQAADwAAESERIREhESERIREhESERIQIAAwACAP8A+wAEAPwA/wAFAP0AAwD7AP8AAQABAAEAAAEAAAAABwAFAAATAAARIREhESERIREhESERIREhESERIQEAAQABAP0ABwD/AP8A/wADAPkAAQABAAEAAQABAP8A/wD/AP8A/wAAAQEAAAAGAAcAABMAAAERIREhESERIREhESERIREhESERBgD+AP8AAQACAP0A/wD/AAEAAQAHAP8A/gD/AP4A/wABAAIAAQACAAEAAAEDAP8ABQAHAAADAAABESERBQD+AAcA+AAIAAABAgAAAAcABwAAEwAAAREhESERIREhESERIREhESERIREFAAEAAQD/AP8A/QACAAEA/wD+AAcA/wD+AP8A/gD/AAEAAgABAAIAAQAAAQAAAQAHAAUAABMAABEhESERIREhESERIREhESERIREhAQACAAEAAgABAP8A/gD/AP4A/wAEAAEA/wD/AAEA/gD/AAEAAQD/AAAEAAAAAAcABwAAAwALAA8AHwAAAREhGQIhESERIREBESERASERIREhESERIREhESERIQMA/wADAP8A/wACAP8A/AABAAEAAwABAAEA/gD9AP4ABwD/AAEA/AD/AAEAAQD/AAQA/wABAPwAAQABAP8A/wD9AAEA/wAAAAMAAAAABwAHAAADAAsAHwAAAREhEQERIREhESERKQERIREhESERIREhESERIREhESEDAAEA/gADAP8A/wD9AAEAAQABAAEAAQABAAEA/gD9AP4ABgD/AAEA/QD/AAEAAQD/AAEAAgABAP8A/gD/AP0AAQD/AAABAAD/AAcABwAAIwAAESETMxMhESERIREhESERIREhESERIREhESERIREhESERIREhAQAI+AgD+AEA/gD+AP8AAQACAAIA/wD/AP8A/wABAP4A/wD/AAUAAQABAP8A/wABAP8A/gD/AAEA/wD/AP8A/wABAAEAAQABAAAAAQEAAAAHAAcAABMAAAERIREhESERIREhESERIREhESERBQD/AAMA/AADAP0ABAD6AAIAAQAHAP8A/wD/AP8A/wD/AP8ABQABAAEAAAIAAAAABwAHAAAJACEAAAERIREhESERIREBIREhEyERIREhESERIREhESERIREhESECAAEAAQABAP4A/QABAAEACAH4AQABAP8AAgD+AP8A/wD/AP4ABgD+AP8A/wADAAEA/wABAAEA/wABAP8A/wD7AAEAAQABAP0AAAAEAAAAAAcABwAAAwAHAAsAFwAAAREhGQIhGQIhEQEhEyERIREhESERIQMA/wADAP8A/AABAAgE+AEA/wD7AP8ABwD/AAEA/QD9AAMAAwD/AAEA/QABAP8A/QD/AAEAAAADAAAAAAcABwAAAwAHABMAAAERIREhESERASERIREhESERIREhAwD/AAMA/wD8AAIAAwACAP8A+wD/AAcA/wABAP8AAQD+APwABAD8AP8AAQAAAgEAAAAHAAcAAAMAGQAAAREhEQERIREhESERIREhESERIREhESERIREDAAEAAQD/AAIAAQD+AP8A/gD/AAEAAQABAAQA/QADAAMA/wD/APwA/wABAP8AAQADAAEAAQABAAACAQAAAAcABwAAAwAZAAABESERAREhESERIREhESERIREhESERIREhEQMAAQD/AAEAAgABAP4A/wD+AP8AAQABAP8ABAD9AAMAAwD/AP8A/AD/AAEA/wABAAMAAQABAAEAAAMBAAAABwAHAAADAAcAGwAAAREhEQERIRkCIREhESERIREhESERIREhESERAwABAP4AAwABAAEA/gD/AP4A/wABAP8AAQAEAP0AAwACAP8AAQABAP8A+wD/AAEA/wABAAMAAQABAAEAAAAEAQAAAAcABwAAAwAHAAsAGQAAAREhEQERIREBESERASERIREhESERIREhESEDAP8AAQABAAEA/wD+AAQAAQD+AP8A/gD/AAEABwD/AAEA/QD9AAMAAwD/AAEA/gD8AP8AAQD/AAEAAwAAAwEAAAAHAAcAAAMABwAhAAABESEZAiEZAiERIREhESERIREhESERIREhESERIREhEQIAAQABAAEAAQD/AAEAAQD+AP8A/gD/AAEA/wABAAYA/wABAP4A/QADAAMA/wABAP8A/wD8AP8AAQD/AAEAAwABAAEAAQAAAwEAAAAHAAcAAAMABwAhAAABESERAREhGQIhESERIREhESERIREhESERIREhESERIREDAAEA/wABAAEA/wACAAEA/gD/AP4A/wABAAEA/wABAAMA/gACAAMA/wABAAEA/wD/AP8A/QD/AAEA/wABAAIAAQABAAEAAQAAAAEBAP8ABgAGAAAfAAABIREhESERIREhESERIREhESERIREhESERIRElNSERIQIAAwABAP4A/wD/AAEAAgABAP8A/wD/AP8AAQD/AP8AAQAGAP8A/wABAP8A/wD/AAEA/wD/AP8A/wABAAEACPgDAAACAQAAAAYABwAAAwAZAAABESEZAiERBRUhESERIREhESERIREhESERAwACAP8AAQABAP0AAgD9AP8AAQABAAEABAD/AAEAAwD/AP8ACPj+AP8A/wABAAMAAQABAAEAAAACAQAAAAYABwAAAwAZAAABESERAREhEQUVIREhESERIREhESERIREhEQMAAgD+AAEAAQABAP0AAgD9AP8AAQABAP8ABAD/AAEAAwD/AP8ACPj+AP8A/wABAAMAAQABAAEAAAMBAAAABgAHAAADAAcAHQAAAREhEQERIRkCIREhESERIREhESERIREhESERIREDAAIA/QADAAEA/wABAP0AAgD9AP8AAQD/AAEABAD/AAEAAgD/AAEAAQD/AP8A/wD+AP8A/wABAAMAAQABAAEAAAAEAQAAAAYABwAAAwAHAAsAGQAAAREhEQERIRkCIREBIREhESERIREhESERIQMA/wABAAIA/wD+AAMAAQD9AAIA/QD/AAEABwD/AAEA/QD/AAEAAwD/AAEA/gD/AP4A/wD/AAEAAwAAAAICAAAABQAHAAAFAA0AAAEhESERIQERIREhESERAgADAP4A/wADAP8A/wABAAQA/AADAAQA/wD/AAEAAQAAAgIAAAAFAAcAAAUADQAAASERIREhAREhESERIRECAAMA/gD/AAIAAQD/AP8ABAD8AAMABAD/AP8AAQABAAACAQAAAAYABwAABQARAAABIREhESEBESERIREhESERIRECAAMA/gD/AAMAAQD/AP0A/wABAAQA/AADAAQA/wD/AAEA/wABAAEAAAMCAAAABQAGAAADAAkADQAAASERIREhESERIQEhESECAAEA/wADAP4A/wACAAEA/wAGAP8A/wD8AAMAAwD/AAACAQAAAAcABwAADwAfAAABIREhESERIREhESERIREhAREhESERIREhESERIREhEQEAAQABAAMAAQD+AP8A/gD/AAQAAQABAP8A/gD/AP8AAQAEAP8AAQD/AP0AAwD9AAMABAD/AAEA/wD/AAEA/wABAAEAAAIBAAAABgAHAAADABcAAAERIREBESERBRUhESERIREhESERIREhEQMAAQABAP8AAQABAP8A/QD/AAEAAQABAAQA/QADAAMA/wD/AAj4/QD/AAEAAwABAAEAAQAAAgEAAAAGAAcAAAMAFwAAAREhEQERIREFFSERIREhESERIREhESERAwABAP8AAQABAAEA/wD9AP8AAQABAP8ABAD9AAMAAwD/AP8ACPj9AP8AAQADAAEAAQABAAADAQAAAAYABwAAAwAHABsAAAERIREBESEZAiERIREhESERIREhESERIREhEQMAAQD+AAMAAQD/AAEA/wD9AP8AAQD/AAEABAD9AAMAAgD/AAEAAQD/AP8A/wD9AP8AAQADAAEAAQABAAAABAEAAAAGAAcAAAMABwALABcAAAERIREBESERAREhEQEhESERIREhESERIQMA/wABAAEAAQD/AP4AAwABAP8A/QD/AAEABwD/AAEA/QD9AAMAAwD/AAEA/gD/AP0A/wABAAMAAAMBAAAABgAHAAADAAcAHQAAAREhGQIhGQIhESERIREhESERIREhESERIREhEQIAAQABAAEAAQD/AAEA/wD9AP8AAQD/AAEABgD/AAEA/gD9AAMAAwD/AAEA/wD+AP0A/wABAAMAAQABAAEAAAIBAAAABwAHAAADABcAAAERIREBESERIREhESERIREhESERIREhEQMAAQABAP8AAgABAP4A/wD+AP8AAgABAAUA/AAEAAIA/wD/APwA/wABAP8AAQAEAAEAAQAAAgEAAAAHAAcAAAMAFwAAAREhEQERIREhESERIREhESERIREhESERAwABAP8AAQACAAEA/gD/AP4A/wACAP8ABQD8AAQAAgD/AP8A/AD/AAEA/wABAAQAAQABAAACAQAAAAcABwAACwAbAAABESERIREhESERIREBIREhESERIREhESERIREhBQABAP8A/QD/AAEA/wACAAEAAgABAP4A/wD+AP8ABwD/AP8AAQD/AAEAAQD9AP0AAwD9AP8AAQD/AAEAAAMBAAAABwAHAAADAAcAFwAAAREhESERIREBIREhESERIREhESERIREhAwD/AAMA/wD9AAIAAQACAAEA/gD/AP4A/wAHAP8AAQD/AAEA/gD8AAQA/AD/AAEA/wABAAABAQAAAAcABwAADwAAAREhESERIREhESERIREhEQUAAQABAP4A/gD+AAEAAQAHAP8A/wD/APwABAABAAEAAQAAAgEAAgAGAAcAAAMADwAAAREhEQEhESERIREhESERIQIAAwD9AAMAAQD/AP0A/wABAAYA/QADAAEA/wD9AP8AAQADAAACAQAAAAYABwAAAwAfAAABESERAREhESERIREhESERIREhESERIREhESERIREhEQIAAQABAAEAAQD/AP8AAQABAP8A/wD/AP8A/wABAAEABQD9AAMAAgD/AP8A/wABAP0AAQD/AP8A/wABAAEAAwABAAEAAAEAAAAABwAHAAAbAAARIREhESERIREhESERIREhESERIREhESERIREhAQD/AAEAAQAEAAEA/gD+AAIA/gACAAIA/wD6AAEAAgABAAIAAQD/AP8AAQD+AP8A/gABAP8A/wAAAQEAAQAGAAUAAAsAAAEhESERIREhESERIQIAAwABAP8A/QD/AAEABQD/AP4A/wABAAIAAAIAAAAABwAHAAAJABsAAAERIREhESERIREpARMhESERIREhESERIREhESECAAEAAgD/AAEA+wABAAgE+AEA/wABAP8A/QD/AP4ABgD9AP8AAgABAAEAAQD/AP8A/wD+AP8AAQD+AAAABQAA/wAIAAcAAAMABwAPAB0AMQAAAREhEQERIREBESERIREhEQERIREhESERIREhESERASERIRMhESERIREhESEDIREhESEBAAEAAQACAP0ABAD/AP4A/wADAAEA/wABAAEA/wD6AAEAAQAIA/gBAAEA/wD/AAj8CP8A/wAFAPwABAD/AP8AAQD9AP8AAQABAP8ABQD/AP8A/wD/AP8ABAABAP8AAQABAP8A/wD8AP8A/wABAAEAAAMAAAAACAAHAAALABcAKwAAASERIREhESERIREhAREhESERIREhESERKQERIRMhESERIREhESEDIREhESEDAAIA/gACAP4A/wABAP4AAQAEAAEA/wD8AP4AAQABAAgD+AEAAQD/AP8ACPwI/wD/AAUA/wD/AP8AAQABAAEA/QD/AAEAAwABAP8AAQABAP8A/wD9AP8A/wABAAEAAAIAAAIABwAHAAAHABMAABEhESERIREhAREhESERIREhESERAwD/AP8A/wAFAAEAAQD/AP8A/wAHAP8A/AAEAAEA/wABAPsAAgD+AAUAAAIAAAAABwAHAAADABcAAAERIREpAREhEyERIREhESERIREhESERIQIAAQD9AAEAAQAIBPj+AAEA/wACAPwA/wD+AAUA/gACAAEAAQD/AP4A/wD+AP8AAgD+AAAAAwAAAAAHAAcAAAcADwAbAAABESERIREhEQERIREhESERKQETIREhESERIREhAgADAP8A/wD/AAEAAQABAPsAAQAIBPgBAP8A+wD/AAIA/wADAP8A/wAEAP0AAQABAAEAAQD/APsA/wABAAAAAQEAAAAHAAcAABcAAAERIREhESERIREhESERIREhESERIREhEQMAAgACAP8A/wACAP4A/gD+AAIA/wD/AAcA/QADAP0A/wD/AP8A/wABAAEAAQABAAMAAAMAAAAABwAFAAADAAcAGQAAAREhEQERIREBIREhESERIREhESERIREhESECAAEAAgABAPoAAQACAP4ABQABAP4AAgD6AP8AAgD/AAEAAgD/AAEA/gABAAEAAQD/AP4A/wD/AAEAAAMAAAAABwAFAAADAAcAGwAAAREhEQERIREBIREhEyERIREhESERIREhESERIQMAAQD/AAEA/AABAAEACAL4AQABAP8A/wD9AP8A/wACAP8AAQACAP8AAQD9AAMAAQD/AAEA/wD9AP8AAQD/AAAAAgAAAAAHAAcAAAMAFwAAASERIQEhESERIREhESERIREhESERIREhBQD9AAMAAgD/APsA/wABAAEAAwD/AP4AAwACAAYAAQD6AP8AAQACAAEAAQD/AP8A/gABAAACAgAAAAYABwAAAwAPAAABIREhAREhESERIREhESERAwACAP4AAgABAP8A/gD/AAEABgABAPkAAQADAAEA/wD9AP8AAAIBAAEABwAGAAATACcAAAEhESERIREhESERIREhESERIREhASERIREhESERIREhESERIREhESEDAAEA/wD/AAEAAQD/AP8A/wABAAEAAwABAP8A/wABAAEA/wD/AP8AAQABAAYA/wD/AP8A/wD/AAEAAQABAAEAAQD/AP8A/wD/AP8AAQABAAEAAQAAAgEAAQAHAAYAABMAJwAAASERIREhESERIREhESERIREhESEBIREhESERIREhESERIREhESERIQEAAQABAAEA/wD/AP8AAQABAP8A/wADAAEAAQABAP8A/wD/AAEAAQD/AP8ABgD/AP8A/wD/AP8AAQABAAEAAQABAP8A/wD/AP8A/wABAAEAAQABAAADAAABAAcAAwAAAwAHAAsAABEhESEBIREhASERIQEA/wADAAEA/wADAAEA/wADAP4AAgD+AAIA/gAAAgAAAAAHAAcAAAcAHwAAAREhESERIREpAREhESERIREhESERIREhESERIREhESECAAMA/wD/AP0AAQABAAEA/wABAAEAAQABAAEA/gD9AP4AAwD/AAEAAQD/AAEAAQABAAEA/wD/AP8A/wD9AAEA/wAAAwAAAAAHAAcAAAMACwAlAAABESERAREhESERIREpAREhESERIREhESERIREhESERIREhESERIQIAAQD/AAMA/wD/AP0AAQABAP8AAQACAAEAAQD/AAEAAQD+AP0A/gAGAP8AAQD9AP8AAQABAP8AAQABAAEAAQD/AAEA/wD+AP8A/QABAP8AAAMAAAAABwAHAAADAAcAHQAAAREhEQERIREpAREhEyERIREhESERBRUhESERIREhAgABAP8AAwD7AAEAAQAIAfgBAAEA/wABAAEA/wD7AP8ABgD/AAEA/gD9AAMAAgABAP8AAQD/AP8ACPj9AP8AAQAAAAEAAAAABwAHAAAXAAARIREhESERIREhESERIREhESERIREhESEBAAIAAQACAAEA/wD/AP8A/wD/AP8A/wAGAAEA/wABAP8A/QD/AP8A/wABAAEAAQAAAQEAAAAHAAcAABkAAAERIREhESERIREhESERIREhESERIREhESERBQABAAEA/wD/AAEA/wD/AP8A/wD/AAEAAQAHAP8A/wD/AP8AAQABAAEA+wD/AAEAAQABAAQAAAEBAAMABgAEAAADAAABIREhAQAFAPsABAD/AAABAAADAAgABAAAAwAAESERIQgA+AAEAP8AAAEBAAQABwAHAAAPAAABESERIREhESERIREhESERAwABAAIAAQD+AP8A/gD/AAcA/gACAP4A/wABAP8AAQACAAABAAAEAAYABwAADwAAESERIREhESERIREhESERIQEAAgABAAIA/wD+AP8A/gAFAAIA/gACAP4A/wABAP8AAAEEAAMABgAHAAAJAAABESERIREhESERBgD/AAEA/wD/AAcA/gD/AP8AAQADAAABAQADAAMABwAACQAAAREhESERIREhEQMA/wD/AAEA/wAHAP0A/wABAAEAAgAAAwEAAQAGAAYAAAMABwALAAABIREhESERIQEhESEDAAEA/wABAP8A/gAFAPsAAgD/AAUA/wD/AP8AAAMBAP8ABwAHAAADAAcAIwAAAREhESERIREBIREhESERIREhESERIREhESERIREhESERIREhBAD/AAMA/wD8AAIAAQABAAEAAQD/AP8A/wD+AAEAAQD/AP8A/wAHAP8AAQD/AAEA/gD/AP8AAQABAP8A/gD/AP4AAQABAAEAAQABAAADAQAAAAcABwAAAwAHABcAAAERIREhESERASERIREhESERIREhESERIQMA/wAEAP8A/AACAAIAAgD/AP8A/gD/AP8ABwD/AAEA/wABAP4A/gACAP4A/wD+AAIAAQAAAQAAAAAHAAcAACMAABEhESERIREhESERIREhESERIREhESERIREhESERIREhESERIQEA/wACAAEAAwABAP8A/gABAP4AAgD/AAIAAQD/AP0A/wD+AAMAAQABAAEAAQD/AP8AAQD/AP8A/wD/AP8AAQD/AP8AAQABAAABAQABAAQABgAAEwAAASERIREhESERIREhESERIREhESEEAP8A/wABAAEA/wD/AP8AAQABAAEABQD/AP8A/wD/AAEAAQABAAEAAQAAAQMAAQAGAAYAABMAAAERIREhESERIREhESERIREhESERBAABAAEA/wD/AP8AAQABAP8A/wAGAP8A/wD/AP8A/wABAAEAAQABAAEAAAEBAAAABwAHAAAPAAABESERIREhESERIREhESERBQACAP8A/wD+AP8A/wACAAcA/AD/AP8A/wABAAEAAQAEAAABAgADAAQABQAAAwAAASERIQIAAgD+AAUA/gAAAwAAAAAHAAcAAAcACwAjAAABESERIREhEQERIREBIREhESERIREhESERIREhESERIREhESECAAMA/wD/AP8AAwD7AAEAAQD/AAEAAwABAP8AAQABAP4A/QD+AAMA/wABAAEA/wADAP8AAQD9AAEAAQABAAEA/wD/AP8A/wD9AAEA/wAAAgEAAAAHAAcAAAMAFwAAAREhGQIhEQUVIREhESERIREhESERIREDAAIAAQABAPwAAwD9AAQA+gABAAEABgD/AAEAAQD/AP8ACPj/AP8A/wD/AAUAAQABAAAAAgAAAAAHAAcAAAcAHwAAAREhESERIREpAREhESERIREhESERIREhESERIREhESECAAMA/wD/AP0AAQABAAEAAQABAP8AAQABAAEA/gD9AP4AAwD/AAEAAQD/AAEAAQABAAEA/wD/AP8A/wD9AAEA/wAAAwEAAAAHAAcAAAMABwATAAABESERIREhEQEhESERIREhESERIQQA/wADAP8A/AAGAPwAAwD9AAQA+gAHAP8AAQD/AAEA/gD/AP8A/wD/AP8AAAEBAAAABwAHAAATAAABESERIREhESERIREhESERIREhEQQAAQACAPwAAwD9AAQA+gADAP8ABwD/AP8A/wD/AP8A/wD/AAUAAQABAAABAQAAAAcABwAAEwAAAREhESERIREhESERIREhESERIREFAP8AAwD+AAIA+gACAP4AAgABAAcA/wD/AP8A/QD/AAEAAwABAAEAAQAAAgEAAAAHAAcAAAMAFwAAAREhGQIhEQUVIREhESERIREhESERIREDAAIAAQABAP4AAgD6AAIA/gABAAEABgD/AAEAAQD/AP8ACPj9AP8AAQADAAEAAQABAAAAAwEAAAAHAAcAAAMABwATAAABESERIREhEQEhESERIREhESERIQMA/wAEAP8A/AAGAP4AAgD6AAIA/gAHAP8AAQD/AAEA/gD/AP0A/wABAAMAAAEBAAAABwAHAAATAAABESERIREhESERIREhESERIREhEQQAAQACAP4AAgD6AAIA/gADAP8ABwD/AP8A/wD9AP8AAQADAAEAAQABAAACAAAAAAcABwAAAwAXAAABESERKQERIREhESERIREhESERIREhESECAAMA+wABAAIAAQABAP8AAgABAP8A+wD/AAQA/QADAAEAAQABAP8A/wD/AP0A/wABAAADAAAAAAcABwAAAwAHABcAAAERIREBESERASERIREhESERIREhESERIQIAAwD9AAMA+wABAAEAAwABAAEA/wD7AP8ABAD9AAMAAgD/AAEA/gACAAEA/wD+AP0A/wABAAACAAAAAAcABwAAAwAXAAABESERKQERIREhESERIREhESERIREhESECAAMA+wABAAIA/wABAAEAAgABAP8A+wD/AAQA/QADAAEAAQABAP8A/wD/AP0A/wABAAACAAAAAAcABwAABwATAAABESERIREhEQEhESERIREhESERIQUA/wD/AAEA/AACAAMAAgD/APsA/wAHAP8A/wABAAEA/gD8AAQA/AD/AAEAAAIAAAAABwAHAAALABcAAAERIREhESERIREhEQEhESERIREhESERIQUAAQD/AP0A/wABAP4AAgADAAIA/wD7AP8ABwD/AP8AAQD/AAEAAQD9AP0AAwD9AP8AAQAAAgAAAAAHAAcAAAcAEwAAAREhESERIREBIREhESERIREhESEDAAEA/wD/AP4AAgADAAIA/wD7AP8ABwD/AP8AAQABAP4A/AAEAPwA/wABAAABAAAAAAcABwAAFwAAESETMxMhESERIREhESERIREhESERIREhAQAJ9wkD9wEA/gD+AAIAAgD/APwA/wD/AAUAAQABAP8A/wD/AP8A/wD/AP8AAQABAAAAAwAAAAAHAAcAAAcADwAjAAABESERIREhESERIREhESERASERIREhESERIREhESEDIREhESEBAAIA/gABAAIAAgD+AAEA+wABAAEAAwABAAEA/wD/AAn+Cf8A/gADAP8AAwD/AP8A/wADAP8A/wACAAEAAQD/AP8A+wABAP8AAQD/AAAAAgMAAAAEAAcAAAMABwAAASERIQERIREDAAEA/wABAP8AAwD9AAcA/QADAAACAAAAAAcABwAACwAbAAABESERIREhESERIREBIRMhESERIREhESERIREhAwABAAEA/wD/AAEA/AABAAgD+AEAAQD/AP8A/AD/AAMA/gABAAMAAQD+AP8AAQADAP8A/wD9AP8A/wADAAAABAEAAAAGAAcAAAMABwALACEAAAERIRkCIREBESEZAiERIREhEQURIREhESERIREhESERAgABAAEA/wABAAEAAQD/AAEA/wD9AP8AAQD/AAEABgD/AAEA/QD+AAIAAgD/AAEAAgD/AAEA/wD/AAj8CP8AAQACAAIAAQABAAAAAQEAAAAHAAcAABcAAAERIREhESERIREhESERIREhESERIREhEQUA/wD/AAIAAgD/AP8A/gD/AP8AAgABAAcA/wD/AP4AAgD+AP8A/gACAAEAAgABAAEAAAIBAP8ABwAHAAAHACMAAAERIREhESERASERIREhESERIREhESERIREhESERIREhESERIQYA/wD/AAEA/AACAAEAAQABAAEA/wD/AP8A/gABAAEA/wD/AP8ABwD/AP8AAQABAP4A/wD/AAEAAQD/AP4A/wD+AAEAAQABAAEAAQAAAgAAAAAHAAcAAAMADwAAAREhEQEhESERIREhESERIQIAAwD7AAIABAABAP8A/AD+AAUA/QADAAIA/wD/AP0A/wD/AAACAQD/AAcABwAAAwATAAABESERAREFFSERIREhESERIREhEQQAAQD+AAEAAgABAP8A/gD+AP8ABAD+AAIAAwD/AAj4/wD+AP8A/gAHAAEAAAEBAAMABgAEAAADAAABIREhAQAFAPsABAD/AAABAQABAAYABgAAIwAAASERIREhESERIREhESERIREhESERIREhESERIREhESERIREhAQABAAEA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)");
	await PressStart.load();
	document.fonts.add(PressStart);
}

PS();

engineInit(

///////////////////////////////////////////////////////////////////////////////
()=> // appInit 
{
    resetGame();
    cameraScale = startCameraScale;
},

///////////////////////////////////////////////////////////////////////////////
()=> // appUpdate
{
    const cameraSize = vec2(mainCanvas.width, mainCanvas.height).scale(1/cameraScale);
    renderWindowSize = cameraSize.add(vec2(5));

    gameplayWindowSize = vec2(mainCanvas.width, mainCanvas.height).scale(1/defaultCameraScale);
    updateWindowSize = gameplayWindowSize.add(vec2(30));
    //debugRect(cameraPos, maxGameplayCameraSize);
    //debugRect(cameraPos, updateWindowSize);

    if (debug)
    {
        randSeeded(randSeeded(randSeeded(randSeed = Date.now()))); // set random seed for debug mode stuf
        if (keyWasPressed(81))
            new Enemy(mousePosWorld);

        if (keyWasPressed(84))
        {
            //for(let i=30;i--;)
                new Prop(mousePosWorld);
        }

        if (keyWasPressed(69))
            explosion(mousePosWorld);

        if (keyIsDown(89))
        {
            let e = new ParticleEmitter(mousePosWorld);

            // test
            e.collideTiles = 1;
            //e.tileIndex=7;
            e.emitSize = 2;
            e.colorStartA = new Color(1,1,1,1);
            e.colorStartB = new Color(0,1,1,1);
            e.colorEndA = new Color(0,0,1,0);
            e.colorEndB = new Color(0,.5,1,0);
            e.emitConeAngle = .1;
            e.particleTime = 1
            e.speed = .3
            e.elasticity = .1
            e.gravityScale = 1;
            //e.additive = 1;
            e.angle = -PI;
        }

        if (mouseWheel) // mouse zoom
            cameraScale = clamp(cameraScale*(1-mouseWheel/10), defaultTileSize.x*16, defaultTileSize.x/16);
                    
        //if (keyWasPressed(77))
        //    playSong([[[,0,219,,,,,1.1,,-.1,-50,-.05,-.01,1],[2,0,84,,,.1,,.7,,,,.5,,6.7,1,.05]],[[[0,-1,1,0,5,0],[1,1,8,8,0,3]]],[0,0,0,0],90]) // music test

        if (keyWasPressed(77))
            players[0].pos = mousePosWorld;

        /*if (keyWasPressed(32))
        {
            skyParticles && skyParticles.destroy();
            tileLayer.destroy();
            tileBackgroundLayer.destroy();
            tileParallaxLayers.forEach((tileParallaxLayer)=>tileParallaxLayer.destroy());
            randomizeLevelParams();
            applyArtToLevel();
        }*/
        if (keyWasPressed(78))
            nextLevel();
    }

    // restart if no lives left
    let minDeadTime = 1e3;
    for(const player of players)
        minDeadTime = min(minDeadTime, player && player.isDead() ? player.deadTimer.get() : 0);

    if (minDeadTime > 3 && (keyWasPressed(90) || keyWasPressed(32) || gamepadWasPressed(0)) || keyWasPressed(82))
        resetGame();

    if (levelEndTimer.get() > 3)
        nextLevel();
},

///////////////////////////////////////////////////////////////////////////////
()=> // appUpdatePost
{
    if (players.length == 1)
    {
        const player = players[0];
        if (!player.isDead())
            cameraPos = cameraPos.lerp(player.pos, clamp(player.getAliveTime()/2));
    }
    else
    {
        // camera follows average pos of living players
        let posTotal = vec2();
        let playerCount = 0;
        let cameraOffset = 1;
        for(const player of players)
        {
            if (player && !player.isDead())
            {
                ++playerCount;
                posTotal = posTotal.add(player.pos.add(vec2(0,cameraOffset)));
            }
        }

        if (playerCount)
            cameraPos = cameraPos.lerp(posTotal.scale(1/playerCount), .2);
    }

    // spawn players if they don't exist
    for(let i = maxPlayers;i--;)
    {
        if (!players[i] && (gamepadWasPressed(0, i)||gamepadWasPressed(1, i)))
        {
            ++playerLives;
            new Player(checkpointPos, i);
        }
    }
    
    // clamp to bottom and sides of level
    if (clampCamera)
    {
        const w = mainCanvas.width/2/cameraScale+1;
        const h = mainCanvas.height/2/cameraScale+2;
        cameraPos.y = max(cameraPos.y, h);
        if (w*2 < tileCollisionSize.x)
            cameraPos.x = clamp(cameraPos.x, tileCollisionSize.x - w, w);
    }

    updateParallaxLayers();

    updateSky();
},

///////////////////////////////////////////////////////////////////////////////
()=> // appRender
{
    const gradient = mainContext.createLinearGradient(0,0,0,mainCanvas.height);
    gradient.addColorStop(0,levelSkyColor.rgba());
    gradient.addColorStop(1,levelSkyHorizonColor.rgba());
    mainContext.fillStyle = gradient;
    //mainContext.fillStyle = levelSkyColor.rgba();
    mainContext.fillRect(0,0,mainCanvas.width, mainCanvas.height);

    drawStars();
},

///////////////////////////////////////////////////////////////////////////////
()=> // appRenderPost
{
    //let minAliveTime = 9;
    //for(const player of players)
    //    minAliveTime = min(minAliveTime, player.getAliveTime());

    //const livesPercent = percent(minAliveTime, 5, 4)
    //const s = 8;
    //const offset = 100*livesPercent;
    //mainContext.drawImage(tileImage, 32, 8, s, s, 32, mainCanvas.height-90, s*9, s*9);
    mainContext.textAlign = 'center';
    const p = percent(gameTimer.get(), 8, 10);

    //mainContext.globalCompositeOperation = 'difference';

mainContext.fillStyle = new Color(0,0,0,p).rgba();
    if (p > 0)
    {
        //mainContext.fillStyle = (new Color).setHSLA(time/3,1,.5,p).rgba();
        mainContext.font = '70px "Press Start"';
        mainContext.fillText('SPACE HUGGERS REMAKE', mainCanvas.width/2, 140);
    }

    mainContext.font = '35px "Press Start"';
    p > 0 && mainContext.fillText('A JS13K Game by Frank Force, Drass Mangy, and WM',mainCanvas.width/2, 210);
    // check if any enemies left
    let enemiesCount = 0;
    for (const o of engineCollideObjects)
    {
        if (o.isCharacter && o.team  == team_enemy)
        {
            ++enemiesCount;
            const pos = vec2(mainCanvas.width/2 + (o.pos.x - cameraPos.x)*30,mainCanvas.height-20);
            drawRectScreenSpace(pos, o.size.scale(20), o.color.scale(1,.6));
        }
    }

    if (!enemiesCount && !levelEndTimer.isSet())
        levelEndTimer.set();

    mainContext.fillStyle = new Color(0,0,0).rgba();
    mainContext.fillText('Level ' + level + '      Lives ' + playerLives + '      Enemies ' + enemiesCount, mainCanvas.width/2, mainCanvas.height-40);

    // fade in level transition
    const fade = levelEndTimer.isSet() ? percent(levelEndTimer.get(), 3, 1) : percent(levelTimer.get(), .5, 2);
    drawRect(cameraPos, vec2(1e3), new Color(0,0,0,fade))
});
